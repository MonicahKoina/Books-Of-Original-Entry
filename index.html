<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Purchases Journal</title>
    <style>
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }
      th,
      td {
        border: 1px solid black;
        padding: 8px;
        text-align: left;
      }
      th {
        background-color: #f2f2f2;
      }
      form {
        display: flex;
        flex-direction: column;
        gap: 10px;
        max-width: 400px;
      }
      label {
        font-weight: bold;
      }
      button {
        width: fit-content;
        padding: 5px 15px;
      }
    </style>
  </head>
  <body>
    <h2>Purchases Journal</h2>
    <!-- Purchases journal records purchases made on credit only -->
    <form id="form">
      <label for="folio">Folio</label>
      <input type="number" name="folio" id="folio" readonly />

      <label for="date">Purchase Date</label>
      <input type="date" name="date" id="date" required />

      <label for="details">Details</label>
      <input
        type="text"
        id="details"
        name="details"
        placeholder="e.g David Chege"
        required
      />

      <label for="amount">Enter Amount</label>
      <input
        type="number"
        name="amount"
        id="amount"
        placeholder="e.g 40000"
        required
      />

      <button type="submit">Save Purchase</button>
    </form>

    <div id="tableContainer"></div>
    <script>
      let form = document.getElementById("form");
      let folio = document.getElementById("folio");
      let date = document.getElementById("date");
      let details = document.getElementById("details");
      let amount = document.getElementById("amount");
      let tableContainer = document.getElementById("tableContainer");

      let table;
      let folioCounter = 1; // start from 1 for PL001

      function generateFolioCode(counter) {
        return "PL" + String(counter).padStart(3, "0");
      }

      form.addEventListener("submit", (e) => {
        e.preventDefault();

        // Create the table on the first entry
        if (!table) {
          table = document.createElement("table");
          table.border = "1";

          let thead = document.createElement("thead");
          let headerRow = document.createElement("tr");

          ["Folio", "Date", "Details", "Amount"].forEach((headerText) => {
            let th = document.createElement("th");
            th.textContent = headerText;
            headerRow.appendChild(th);
          });

          thead.appendChild(headerRow);
          table.appendChild(thead);

          let tbody = document.createElement("tbody");
          table.appendChild(tbody);

          tableContainer.appendChild(table);
        }

        // Generate folio like PL001, PL002
        const currentFolio = generateFolioCode(folioCounter++);
        folio.value = currentFolio;

        // Add new row to table
        let row = document.createElement("tr");
        [currentFolio, date.value, details.value, amount.value].forEach(
          (item) => {
            let td = document.createElement("td");
            td.textContent = item;
            row.appendChild(td);
          }
        );

        table.querySelector("tbody").appendChild(row);

        form.reset(); // clear form for next input
      });
    </script>
  </body>
</html>
